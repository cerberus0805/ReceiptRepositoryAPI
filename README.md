# ReceiptRepositoryAPI
An example of Rust WebAPI Server - axum and diesel example

Article in English and Mandarin: https://concurrentseal.wordpress.com/

## Project Introduction
[A Journey with Rust Web API – 00 Project Requirement Analysis [Rust Web API 之旅 – 00 專案的需求分析]](https://concurrentseal.wordpress.com/2024/06/01/rust-web-api%e4%b9%8b%e6%97%85-00/)

## axum Get Handler
[A Journey with Rust Web API – 01 GET handler of Rust axum [Rust Web API 之旅 – 01 Rust axum 的 GET handler]](https://concurrentseal.wordpress.com/2024/06/10/rust-web-api%e4%b9%8b%e6%97%85-01/)

## Run a PostgreSQL Docker and diesel CLI Usage
[A Journey with Rust Web API – 02 Rust ORM Diesel with PostgreSQL [Rust Web API 之旅 – 02 Rust 的 Diesel 套件與 PostgreSQL 資料庫]](https://concurrentseal.wordpress.com/2024/06/16/a-journey-with-rust-web-api-02-rust-orm-diesel-with-postgresql-rust-web-api-%e4%b9%8b%e6%97%85-02-rust-%e7%9a%84-diesel-%e5%a5%97%e4%bb%b6%e8%88%87-postgresql-%e8%b3%87%e6%96%99%e5%ba%ab/)

## Query with diesel
[A Journey with Rust Web API – 03 Basic Queries with Rust Diesel [Rust Web API 之旅 – 03 Rust Diesel 的基本查詢]](https://concurrentseal.wordpress.com/2024/06/23/a-journey-with-rust-web-api-03-basic-queries-with-rust-diesel-rust-web-api-%e4%b9%8b%e6%97%85-03-rust-diesel-%e7%9a%84%e5%9f%ba%e6%9c%ac%e6%9f%a5%e8%a9%a2/)

## Query with Pagination
[A Journey with Rust Web API – 04 Rust Diesel Pagination Queries [Rust Web API 之旅 – 04 Rust Diesel 分頁查詢]](https://concurrentseal.wordpress.com/2024/06/30/a-journey-with-rust-web-api-04-rust-diesel-pagination-queries-rust-web-api-%e4%b9%8b%e6%97%85-04-rust-diesel-%e5%88%86%e9%a0%81%e6%9f%a5%e8%a9%a2/)

## Custom Error with thiserror
[A Journey with Rust Web API – 05 Rust thiserror [Rust Web API 之旅 – 05 Rust thiserror 套件]](https://concurrentseal.wordpress.com/2024/07/07/a-journey-with-rust-web-api-05-rust-thiserror-rust-web-api-%e4%b9%8b%e6%97%85-05-rust-thiserror-%e5%a5%97%e4%bb%b6/)

## Logging with tracing
[A Journey with Rust Web API – 06 Logging [Rust Web API 之旅 – 06 Rust 日誌 ]](https://concurrentseal.wordpress.com/2024/07/14/a-journey-with-rust-web-api-06-logging-rust-web-api-%e4%b9%8b%e6%97%85-06-rust-%e6%97%a5%e8%aa%8c/)

## Recap 1
[A Journey with Rust Web API – 07 Recap axum and diesel query [Rust Web API 之旅 – 07 Rust 回顧axum 和 diesel 查詢 ]](https://concurrentseal.wordpress.com/2024/07/21/a-journey-with-rust-web-api-07-recap-axum-and-diesel-query-rust-web-api-%e4%b9%8b%e6%97%85-07-rust-%e5%9b%9e%e9%a1%a7axum-%e5%92%8c-diesel-%e6%9f%a5%e8%a9%a2/)

## axum Post Handler and Insert Records with diesel
[A Journey with Rust Web API – 08 POST handler in axum and new record with diesel [Rust Web API 之旅 – 08 axum 中的 POST handler 與 diesel 中新增資料 ]](https://concurrentseal.wordpress.com/2024/07/28/a-journey-with-rust-web-api-08-post-handler-in-axum-and-new-record-with-diesel-rust-web-api-%e4%b9%8b%e6%97%85-08-axum-%e4%b8%ad%e7%9a%84-post-handler-%e8%88%87-diesel-%e4%b8%ad/)

## axum Patch Handler and update Records with diesel
[A Journey with Rust Web API – 09 Patch handler in axum and update records with diesel [Rust Web API 之旅 – 09 axum 中的 Patch handler 與 diesel 中更新資料 ]](https://concurrentseal.wordpress.com/2024/08/04/a-journey-with-rust-web-api-09-patch-handler-in-axum-and-update-records-with-diesel-rust-web-api-%e4%b9%8b%e6%97%85-09-axum-%e4%b8%ad%e7%9a%84-patch-handler-%e8%88%87-diesel/)

## axum Delete Handler and Delete Records with diesel
[A Journey with Rust Web API – 10 delete handler in axum and delete records with diesel [Rust Web API 之旅 – 10 axum 中的 delete handler 與 diesel 中刪除資料 ]](https://concurrentseal.wordpress.com/2024/08/12/a-journey-with-rust-web-api-10-delete-handler-in-axum-and-delete-records-with-diesel-rust-web-api-%e4%b9%8b%e6%97%85-09-axum-%e4%b8%ad%e7%9a%84-delete-handler-%e8%88%87-diesel/)

## Query on Some Columns with axum and diesel
[A Journey with Rust Web API – 11 customized query filters in axum and with diesel [Rust Web API 之旅 – 11 axum 中的 客製化查詢篩選與 diesel]](https://concurrentseal.wordpress.com/2024/08/18/a-journey-with-rust-web-api-10-customized-query-filters-in-axum-and-with-diesel-rust-web-api-%e4%b9%8b%e6%97%85-09-axum-%e4%b8%ad%e7%9a%84-%e5%ae%a2%e8%a3%bd%e5%8c%96%e6%9f%a5/)

## Adopt mpsc to resolve concurrent write problem
[A Journey with Rust Web API – 12 tokio mpsc: an approach to resolve concurrent write problems [Rust Web API 之旅 – 12 透過 tokio mpsc 解決並行問題]](https://concurrentseal.wordpress.com/2024/08/24/a-journey-with-rust-web-api-12-tokio-mpsc-an-approach-to-resolve-concurrent-problems-with-rust-web-api-%e4%b9%8b%e6%97%85-12-%e9%80%8f%e9%81%8e-tokio-mpsc-%e8%a7%a3%e6%b1%ba/)

## Trace asynchronous tasks by uuid with diesel
[A Journey with Rust Web API – 13 tracing asynchronous tasks by uuid with diesel [Rust Web API 之旅 – 13 利用 diesel 來透過 uuid 來追蹤非同步工作]](https://concurrentseal.wordpress.com/2024/08/31/a-journey-with-rust-web-api-13-tracing-asynchronous-tasks-by-uuid-with-diesel-rust-web-api-%e4%b9%8b%e6%97%85-13-%e5%88%a9%e7%94%a8-diesel-%e4%be%86%e9%80%8f%e9%81%8e-uuid/)

## Sample .env file
DATABASE_URL=<your_database_url>  
BIND_ADDR=0.0.0.0  
BIND_PORT=3000  
RUST_LOG=receipt_repository_api=debug,tower_http=debug,axum::rejection=trace  
LOG_TO_FILE=0  
LOG_DIRECTORY=.  
LOG_PREFIX=receipt_repository_api  
ALLOW_ORIGINS=<your_frontend_url1>,<your_frontend_url2>,<eg: http://localhost:3001,http://127.0.0.1:3001> 

## Sample of your database url
postgres://<your_postgres_user>:<your_postgres_user_password>@<your_database_host_address>:<your_database_host_port>/<your_database_name>

## Sample of diesel.toml (It is supposed to be generated by diesel CLI)
[print_schema]  
file = "src/schema.rs"  
custom_type_derives = ["diesel::query_builder::QueryId", "Clone"]  

[migrations_directory]  
dir = <your_migration_directory_path>  
